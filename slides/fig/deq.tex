\begin{tikzpicture}[node distance = 0.25cm and 0.5cm, auto, align=center]    
    % blocks
    \node[] (input) {};
    \node[block, right= of input] (G) {
        \begin{onlyenv}<1>
            \input{fig/layer.tex}    
        \end{onlyenv}
        \begin{onlyenv}<2-3>
            \input{fig/recurrent.tex}
        \end{onlyenv}
        \begin{onlyenv}<4->
            $\operatorname{RootFind}\left(\underbrace{f_{\theta}(z_{1:T};x_{1:T})- z_{1:T}}_{g_{\theta}}\right)$
        \end{onlyenv}

        
    };
    \node at (G.north) [above] {$\mathcal{S}_{\operatorname{DEQ}}$};
    \node[right= of G] (output) {};
    
    % Input and outputs coordinates
    
    % lines
    \draw[->] (input)  node[above] {$x_{1:T}, z_{1:T}^0$} -- (G);
    \begin{onlyenv}<1-3>
        \draw[->] (G) -- (output) node[above] {$z_{1:T}^L$} ;    
    \end{onlyenv}
    \begin{onlyenv}<4->
        \draw[->] (G) -- (output) node[above] {$z_{1:T}^*$} ;    
    \end{onlyenv}
    

\end{tikzpicture}